<!--
  Title: my-profile.component.html
  Author: Professor Richard Krasso and Brock Hemsouvanh
  Date: 07/18/2024
  Updated: 07/21/2024 by Brock Hemsouvanh
  Description: HTML template for the user's profile page
-->

<div class="container-fluid mt-6" style="min-height: 600px">
  <div class="row justify-content-center">
    <div class="col-md-6 mb-3">
      <div class="card h-100">
        <div class="card-body">
          <h6 class="d-flex align-items-center mb-3">
            <i class="material-icons text-primary mr-2">info</i>Basic Info
          </h6>
          <!-- User Profile Icon -->
          <div class="profile-image">
            <img
              src="/src/assets/profile-circle.512x512.png"
              style="height: 150px; border-radius: 50%; border: 10px solid #3d3d3d;"
              alt="User profile picture."
            />
          </div>
          <!-- Display Employee ID -->
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">Employee ID</h6>
            </div>
            <div class="col-sm-9 text-secondary">
              {{ employee._id }}
            </div>
          </div>
          <hr />
          <!-- Display First Name -->
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">First Name</h6>
            </div>
            <div class="col-sm-9 text-secondary">
              {{ employee.firstName }}
            </div>
          </div>
          <hr />
          <!-- Display Last Name -->
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">Last Name</h6>
            </div>
            <div class="col-sm-9 text-secondary">
              {{ employee.lastName }}
            </div>
          </div>
          <hr />
          <!-- Display Email -->
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">Email</h6>
            </div>
            <div class="col-sm-9 text-secondary">
              {{ employee.email }}
            </div>
          </div>
          <hr />
          <!-- Display Address -->
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">Address</h6>
            </div>
            <div class="col-sm-9 text-secondary">
              {{ employee.address }}
            </div>
          </div>
          <hr />
          <!-- Display Phone Number -->
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">Phone Number</h6>
            </div>
            <div class="col-sm-9 text-secondary">
              {{ employee.phoneNumber }}
            </div>
          </div>
          <hr />
          <!-- Edit Button to open offcanvas for editing profile -->
          <button class="btn btn-dark" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
            Edit
          </button>
        </div>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <div class="card h-100">
        <div class="card-body">
          <h6 class="d-flex align-items-center mb-3">
            <i class="material-icons text-primary mr-2">settings</i>System Settings
          </h6>
          <!-- Display Language -->
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">Language</h6>
            </div>
            <div class="col-sm-9 text-secondary">English</div>
          </div>
          <hr />
          <!-- Display Role -->
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">Role</h6>
            </div>
            <div class="col-sm-9 text-secondary">
              {{ employee.role }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Offcanvas for editing profile -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasRightLabel">Profile Settings</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <form [formGroup]="profileForm" (ngSubmit)="saveChanges()">
        <fieldset class="form-group">
          <legend>Contact Information</legend>
          <!-- Validation/Success errors -->
          <div *ngIf="errorMessage" class="alert alert-danger">
            {{ errorMessage }}
          </div>
          <div *ngIf="successMessage" class="alert alert-success">
            {{ successMessage }}
          </div>
          <!-- Input for Address -->
          <div class="mb-3">
            <label for="address" class="form-label">Address</label>
            <input type="text" id="address" name="address" class="form-control" formControlName="address" required />
            <!-- Validation errors for Address -->
            <div
              *ngIf="profileForm.controls['address'].invalid && (profileForm.controls['address'].dirty || profileForm.controls['address'].touched)"
              class="alert alert-danger mt-2"
            >
              Address is required.
            </div>
          </div>
          <!-- Input for Phone Number -->
          <div class="mb-3">
            <label for="phoneNumber" class="form-label">Phone Number</label>
            <input type="text" id="phoneNumber" name="phoneNumber" class="form-control" formControlName="phoneNumber" required />
            <!-- Validation errors for Phone Number -->
            <div
              *ngIf="profileForm.controls['phoneNumber'].invalid && (profileForm.controls['phoneNumber'].dirty || profileForm.controls['phoneNumber'].touched)"
              class="alert alert-danger mt-2"
            >
              Phone number is required.
            </div>
          </div>
          <!-- Save Changes Button -->
          <button type="submit" [disabled]="!profileForm.valid" class="btn btn-dark w-100">
            Save Changes
          </button>
        </fieldset>
      </form>
    </div>
  </div>
</div>
